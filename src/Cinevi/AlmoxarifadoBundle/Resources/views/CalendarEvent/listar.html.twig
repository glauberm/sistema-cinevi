{% extends 'CineviAdminBundle::base.html.twig' %}

{% set title = 'Reservas de Equipamento(s)' %}
{% set routeAtual = path('get_calendar_events') %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/fullcalendar/css/fullcalendar/fullcalendar.min.css') }}" />
    <link rel="stylesheet" media="print" href="{{ asset('bundles/fullcalendar/css/fullcalendar/fullcalendar.print.css') }}" />
{% endblock %}

{% block mainAction %}
    <a class="navbar-brand btn btn-link" href="{{ path('fos_user_profile_show') }}">
        {% include 'CineviAdminBundle:SVG:voltar.html.twig' %}
    </a>
{% endblock %}

{% block maisBotoes %}
    {% block maisBotoesBlock %}{% endblock %}
    <div class="navbar-form navbar-nav">
        <a class="btn btn-success" href="{{ path('new_calendar_event') }}">Adicionar</a>
    </div>
{% endblock %}

{% block body %}

    {{ parent() }}

    {% include '@FullCalendar/Calendar/calendar.html.twig' %}

    <noscript>
        <div class="table-responsive">
            <table class="table table-striped table-hovered">
                <thead>
                    <tr>
                        <th>{{ knp_pagination_sortable(pagination, 'CÃ³d.', 'item.title') }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in pagination %}
                        <tr>
                            {% if is_granted('ROLE_FUNCIONARIO') %}
                                <td><a href="{{ path('edit_calendar_event', { 'id': item.id }) }}">{{ item.title }}</a></td>
                            {% else %}
                                <td><a href="{{ path('get_calendar_event', { 'id': item.id }) }}">{{ item.title }}</a></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="text-center">
            {{ knp_pagination_render(pagination) }}
        </div>
    </noscript>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/fullcalendar/js/fullcalendar/fullcalendar.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('vendor/fullcalendar/js/fullcalendar.custom-settings.js') }}" type="text/javascript"></script>
    <script src="{{ asset('vendor/fullcalendar/js/lang/pt-br.js') }}" type="text/javascript"></script>
{% endblock %}
